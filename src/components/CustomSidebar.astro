---
const path = Astro.url.pathname;

// Determine which top-level sections are visible
let allowedSections = ["root"];
if (path.startsWith("/truetech/")) allowedSections = ["truetech"];
if (path.startsWith("/gamingforge/")) allowedSections = ["gamingforge"];
if (path.startsWith("/lifeforge/")) allowedSections = ["lifeforge"];
---

<Sidebar let:item>
  {item && (!item.directory || allowedSections.includes(item.directory.split("/")[0])) && (
    <li>
      <a href={item.href}>{item.label}</a>
      {item.children && item.children.length > 0 && (
        <ul>
          {item.children.map((child: any) => (
            <li><a href={child.href}>{child.label}</a></li>
          ))}
        </ul>
      )}
    </li>
  )}
</Sidebar>